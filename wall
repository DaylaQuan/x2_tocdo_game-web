// --- TOOL: NEON WIREFRAME & X-RAY VISION ---

(function() {
    console.clear();
    console.log("%cüåü K√çCH HO·∫†T CH·∫æ ƒê·ªò L∆Ø·ªöI NEON - X-RAY!", "color: cyan; background: black; font-size: 18px; font-weight: bold");
    console.log("üëâ [1]: T·∫Øt Hack (B√¨nh th∆∞·ªùng)");
    console.log("üëâ [2]: B·∫≠t L∆∞·ªõi Neon (·∫®n b·ªÅ m·∫∑t)");
    console.log("üëâ [3]: Nh√¨n xuy√™n t∆∞·ªùng (Wallhack)");

    var isNeonWireframe = false;
    var isWallhack = false;

    const contexts = [WebGLRenderingContext, WebGL2RenderingContext];
    
    contexts.forEach(ctx => {
        if (!ctx) return;

        const originalDrawElements = ctx.prototype.drawElements;
        ctx.prototype.drawElements = function(mode, count, type, offset) {
            let targetMode = mode;

            if (isNeonWireframe && mode === this.TRIANGLES) {
                // B∆Ø·ªöC 1: ·∫®n b·ªÅ m·∫∑t, bi·∫øn th√†nh ƒë∆∞·ªùng k·∫ª
                targetMode = this.LINES; 

                // B∆Ø·ªöC 2: L√†m n·ªïi b·∫≠t m√†u l∆∞·ªõi (M·∫πo Additive Blending)
                // √âp c√°c ƒë∆∞·ªùng k·∫ª ph·∫£i ph√°t s√°ng b·∫±ng c√°ch c·ªông d·ªìn m√†u s·∫Øc
                this.enable(this.BLEND);
                this.blendFunc(this.ONE, this.ONE); 
                
                // Th·ª≠ tƒÉng ƒë·ªô d√†y ƒë∆∞·ªùng k·∫ª (T√πy tr√¨nh duy·ªát c√≥ h·ªó tr·ª£ hay kh√¥ng)
                this.lineWidth(2.0); 
            }

            // B∆Ø·ªöC 3: X·ª≠ l√Ω nh√¨n xuy√™n t∆∞·ªùng
            if (isWallhack) {
                this.disable(this.DEPTH_TEST);
            } else {
                this.enable(this.DEPTH_TEST);
            }

            originalDrawElements.call(this, targetMode, count, type, offset);
            
            // Tr·∫£ l·∫°i tr·∫°ng th√°i c≈© sau khi v·∫Ω xong 1 v·∫≠t th·ªÉ ƒë·ªÉ tr√°nh l·ªói m√†n h√¨nh
            if (isNeonWireframe) {
                this.disable(this.BLEND);
            }
        };
    });

    // ƒêi·ªÅu khi·ªÉn b·∫±ng b√†n ph√≠m
    document.addEventListener('keydown', function(e) {
        if (e.key === '1') {
            isNeonWireframe = false;
            isWallhack = false;
            console.log("Visual: NORMAL");
        }
        if (e.key === '2') {
            isNeonWireframe = !isNeonWireframe;
            console.log("Neon Wireframe: " + (isNeonWireframe ? "ON" : "OFF"));
        }
        if (e.key === '3') {
            isWallhack = !isWallhack;
            console.log("Wallhack: " + (isWallhack ? "ON" : "OFF"));
        }
    });

    alert("HACK L∆Ø·ªöI NEON ƒê√É S·∫¥N S√ÄNG!\n\nNh·∫•n ph√≠m [2] ƒë·ªÉ th·∫•y ƒëi·ªÅu k·ª≥ di·ªáu.");
})();
